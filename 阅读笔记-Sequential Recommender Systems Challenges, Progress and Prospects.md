# 阅读笔记-Sequential Recommender Systems: Challenges, Progress and Prospects



## 1. 摘要

近年来，顺序推荐系统（SRS）的新兴话题引起了越来越多的关注。与传统的推荐系统(RSs)包括协同过滤和基于内容的过滤不同，SRSs试图理解和建模顺序用户行为、用户和项目之间的交互以及用户偏好和项目流行度随时间的演变。SRS 涉及上述方面，以便更准确地表征用户上下文、意图和目标以及项目消费趋势，从而实现更准确、定制和动态的推荐。在本文中，我们对 SRS 进行了系统的回顾。我们首先展示了 **SRS 的特征**，然后总结和分类这个研究领域的**关键挑战**，然后是**相应的研究进展**，包括该主题的最新和代表性发展。最后，我们讨论了**这个充满活力的领域的重要研究方向**。

## 2. 文章的主要贡献

我们系统地分析了 SRS 中不同数据特征引起的许多关键挑战，并从数据驱动的角度对它们进行了分类，为深入了解 SRS 的特征提供了新的视角。

我们通过从技术角度系统地对最先进的作品进行分类来总结 SRS 当前的研究进展。

我们分享并讨论了 SRS 对社区参考的一些前景。

## 3.数据特点与挑战

由于顾客在现实世界中购物行为、物品特征和特定购物环境的多样性和复杂性，生成的用户-物品交互数据往往具有不同的特征。

### 1 处理常用户的交互

具体来说，长用户-项目交互序列中的两个关键挑战是学习**高阶顺序依赖关系**并学**习长期顺序依赖关系，**

### 2 处理具有灵活顺序的用户-项目交互序列

在实际情况中，有些用户-项目交互序列是严格有序的，而其他序列则可能不是。这意味着并非所有相邻的交互都是严格顺序相关的。比如一个购物序列 S2 = {牛奶，黄油，面粉}，买牛奶或黄油先后顺序并不重要，但购买这两样商品后购买面粉的概率更高。换句话说，牛奶和黄油之间没有严格的顺序，但面粉依赖于它们的联合购买。

- 对于具有灵活顺序的序列，更好地捕获集体顺序依赖关系比捕获逐点依赖关系更为重要。因为前者是模糊的，不假设用户-项目交互间的严格顺序。

- 因此，关键挑战在于如何在假设灵活顺序的情况下捕获集体顺序依赖关系。

  现存的挑战

- 目前的研究大多集中在处理严格顺序的问题上，对灵活顺序的研究尚未受到足够重视。
- 一些现有的推荐系统（SRSs）使用马尔可夫链、因子分解机或循环神经网络（RNN）等方法，只能处理逐点依赖关系，而不擅长建模和捕获集体依赖关系。
- 但是，一些工作尝试通过利用卷积神经网络（CNN）来处理这一挑战，通过模拟交互序列的嵌入矩阵中不同区域之间的局部和全局依赖关系来解决这一问题。

### 3 处理具有噪声的用户-项交互序列

由于用户购物行为的不确定性，大多数用户-项目交互序列并不干净，意味着它们可能包含一些噪声和不相关的交互，这会干扰对下一个交互进行预测。实际上，在用户-项目交互序列中，一些历史交互与下一个交互之间存在强烈的相关性，而其他交互可能只有较弱的相关性，甚至是不相关的。例如，在另一个购物序列 S3 = {培根，玫瑰，鸡蛋，面包} 中，项目 "玫瑰" 可能是一个噪声项，因为它与其他项目非常不同，与它们没有相关性。下一个项目可能是一瓶牛奶的概率很高，它只与培根、鸡蛋和面包有顺序依赖关系，与玫瑰无关。因此，SRSs 中的另一个关键挑战是在含有噪声的用户-项目交互序列上专注地和区分性地学习顺序依赖关系。

一些工作已经尝试通过使用注意力模型 [Wang et al., 2018] 或记忆网络 [Chen et al., 2018] 来选择性地保留和利用那些对下一个交互预测真正相关的交互信息来解决这一典型问题。这些解决方案在这些研究中取得的技术进步将在第 3.3 节中介绍。



### 4 处理具有易构关系的用户-项目交互矩阵

异构关系指的是传递不同类型信息的不同关系，在SRSs中应该以不同的方式进行建模。例如，在用户-项目交互序列中，除了基于广泛出现的基于事件的用户-项目交互顺序依赖关系之外，还存在着基于相似性的关系，即基于项目特征的交互项之间的相似性关系。此外，尽管两者都是顺序依赖关系，但长期顺序依赖关系与短期顺序依赖关系是非常不同的，它们不能以相同的方式进行建模。因此，SRSs中的另一个关键挑战是如何有效地捕获嵌入在用户-项目交互序列中的这些异构关系，并在处理与异构关系相关的用户-项目交互序列时使它们共同发挥作用进行顺序推荐。

目前文献中报道的解决这一挑战的工作非常有限。混合模型[Kang等，2018; Tang等，2019; Wang等，2019]是迄今唯一能够应对这一挑战的解决方案。混合模型将由不同子模型建模的不同类型的关系整合起来，共同生成顺序推荐。具体的技术进展将在第3.3节中介绍。



一个典型的异构关系的例子可以是在社交网络中的用户关系网络。在这个网络中，用户之间的关系可以是多种多样的，包括：

1. **好友关系**：表示两个用户之间是朋友关系。
2. **关注关系**：表示一个用户关注了另一个用户。
3. **家庭关系**：表示家庭成员之间的关系，比如父母和子女之间的关系。
4. **工作关系**：表示同事之间的关系，比如同一公司的员工之间的关系。

这些不同类型的关系在性质和含义上都不同，因此属于异构关系。在社交网络推荐系统中，要有效地利用这些异构关系来进行推荐，可能需要针对每种类型的关系设计不同的推荐算法或模型，以充分利用每种关系类型的信息。例如，对于好友关系，可以推荐朋友的兴趣爱好；对于工作关系，可以推荐同事的专业技能等。

### 5 使用层次结构处理用户-项交互序列

一般来说，与用户-项目交互序列相关的主要有两种层次结构：(1) 元数据与用户-项目交互之间的层次结构。具体而言，用户的人口统计信息在一定程度上可以决定用户的偏好，并进一步影响他们与项目的交互。同样，项目的特征通常也会影响用户是否会喜欢并与其进行交互[Hidasi等人，2016b]；(2) 子序列与用户-项目交互之间的层次结构。更具体地说，在一些SRSs中，一个用户-项目交互序列包含多个子序列（也称为会话）。在这种情况下，除了当前子序列内的先前交互外，历史子序列也可能影响当前子序列中待预测的下一个用户-项目交互[Ying等人，2018]。因此，在SRSs中，另一个关键挑战是如何将嵌入在这两种层次结构中的层次依赖关系结合到顺序依赖关系学习中，以生成更准确的顺序推荐。

尽管已经有相当多的工作尝试从某些方面解决这一挑战，但其他方面的研究较少。一方面，为了考虑项目特征对用户-项目交互的影响，已经提出了一系列包括[Hidasi等人，2016b]在内的特征丰富的神经模型用于SRSs。相比之下，现有的SRSs很少考虑用户人口统计信息的影响，因此应该在这个方向上投入更多的努力。另一方面，一些层次模型包括分层嵌入模型[Wang等人，2015]、分层RNN[Quadrana等人，2017]和分层注意力网络[Ying等人，2018]已经被设计出来，将历史子序列融入到顺序依赖关系学习中，以构建更强大的SRSs。特别是，为了解决这一挑战而取得的技术进步将在第3.2节和第3.3节中进行介绍。



在这种情况下，"交互的层次结构"指的是用户与项目之间的交互可以存在不同的层次或级别。具体来说，有两种主要的交互层次结构：

1. **元数据与用户-项目交互之间的层次结构**：
   - 这个层次结构涉及到用户和项目的元数据，比如用户的人口统计信息（如年龄、性别、地理位置等）和项目的特征（如类别、标签、属性等）。
   - 元数据可以影响用户对项目的偏好，从而影响他们之间的交互。例如，一个年轻的用户可能更喜欢购买时尚的物品，而一个地理位置在农村的用户可能更倾向于购买农产品。

2. **子序列与用户-项目交互之间的层次结构**：
   - 这个层次结构指的是用户-项目交互序列中的子序列（也称为会话），其中一个序列可能包含多个子序列。
   - 每个子序列代表一段时间内的一系列交互，而整个序列则代表用户的整体行为。
   - 在某些情况下，历史子序列的行为可能会影响当前子序列中的用户-项目交互。例如，一个用户在过去几次购物中都购买了健康食品，这可能会影响他们在当前购物中的选择。

这些层次结构在理解用户-项目交互序列时都是重要的，因为它们可以提供更深层次的信息，有助于更准确地理解用户的偏好和行为模式，从而提高顺序推荐系统的性能。



好的，让我给你举一个具体的例子来说明交互的层次结构。

假设我们有一个在线购物网站，其中用户可以浏览并购买各种商品。在这个网站上，有以下几个层次结构的交互：

1. **元数据与用户-项目交互之间的层次结构**：
   
   - 用户的人口统计信息：例如，年龄、性别、地理位置等。假设有两个用户，Alice和Bob，他们分别是年轻女性和中年男性。
   - 项目的特征：例如，商品的类别、品牌、价格等。假设有两个商品，A和B，其中A是一款时尚的女性饰品，而B是一款男士运动鞋。
   
   在这种情况下，Alice可能更倾向于购买商品A，而Bob可能更倾向于购买商品B，因为他们的购买偏好与其人口统计信息和商品特征相关联。
   
2. **子序列与用户-项目交互之间的层次结构**：
   - 用户-项目交互序列中的子序列：例如，Alice和Bob的购物行为可以被分成多个子序列，每个子序列代表一次购物会话。假设Alice在周一购买了一些时尚饰品，周三又购买了一些化妆品，这两次购物会话构成了她的两个子序列。
   - 历史子序列对当前子序列的影响：例如，Alice过去购买时尚饰品的历史子序列可能影响她在当前购物会话中的选择。如果她之前购买了许多类似的商品，那么在当前的购物会话中她可能会被推荐更多的时尚饰品。

在这个例子中，我们可以看到交互的层次结构是如何在用户的人口统计信息、商品的特征以及用户-项目交互序列的子序列之间产生影响的。这些层次结构提供了更深入的理解，有助于推荐系统更准确地预测用户的行为和偏好。

## 4 Research Progress

### 4.1 传统序列模型用于推荐系统

**序列模式挖掘**： 基于序列模式的推荐系统首先在序列数据上**挖掘频繁模式**，然后利用这些挖掘出的模式指导后续的推荐。尽管这种方法简单直接，但序列模式挖掘通常会生成大量冗余模式，这增加了不必要的时间和空间成本。另一个明显的缺点是，由于频率限制，它常常会丢失那些不频繁的模式和项目，这限制了推荐结果只涵盖那些流行的项目。因此，除了一项代表性的研究[Yap et al., 2012]外，这一类别中报告的工作相当少

**马尔可夫链模型**： 基于马尔可夫链的推荐系统采用马尔可夫链模型来模拟序列中用户-项目交互的转换，以预测下一次交互。根据使用的具体技术，基于马尔可夫链的推荐系统分为基础马尔可夫链方法和潜在马尔可夫嵌入方法。前者直接基于显式观察计算转换概率[Garcin et al., 2013]，而后者首先将马尔可夫链嵌入欧几里得空间，然后基于交互之间的欧几里得距离计算转换概率[Feng et al., 2015]。基于马尔可夫链的推荐系统的缺点很明显，一方面，由于马尔可夫性质，它们只能捕捉短**期依赖关系**而忽略长期依赖关系；另一方面，它们只能捕捉**点对点**的依赖关系而忽略了用户-项目交互中的集体依赖关系。因此，近年来在序列推荐系统中使用它们的情况越来越少。

### 4.2 潜在表示模型



潜在表示模型首先学习每个用户或项目的潜在表示，然后利用这些学到的表示来预测随后的**用户-项目互动**。因此，更多的隐性和复杂的依赖关系被捕捉在一个潜在空间中，这大大有利于推荐。接下来，我们介绍两个属于这一分类的代表性模型。

**因子分解机**：
基于因子分解机的序列推荐系统通常利用矩阵分解或张量分解来将观察到的用户-项目互动分解为用户和项目的潜在因子，以供建议[Rendle et al., 2010; Hidasi and Tikk, 2016]。与协同过滤（CF）不同的是，待分解的矩阵或张量是由互动组成的，而不是CF中的评分。这种模型容易受到观察数据稀疏性的影响，因此无法实现理想的推荐。

**嵌入**：
基于嵌入的序列推荐系统通过将所有用户-项目互动编码到一个潜在空间中来学习每个用户和项目的潜在表示，以用于随后的推荐。具体来说，一些工作将学到的潜在表示作为网络的输入，进一步计算用户与项目之间的互动得分，或者连续用户的行为[Wang et al., 2015; 2018]，而其他工作则直接利用这些表示来计算像欧几里得距离这样的度量作为互动得分[He et al., 2018]。这种模型由于其简单性、高效性和有效性，在近年来显示出了巨大的潜力。

## 4.3 SRS的深度神经网络模型

深度神经网络具有模拟和捕捉序列中不同实体（例如用户、项目、互动）之间全面关系的天然优势，因此在过去几年中几乎主导了序列推荐系统（SRSs）。在SRSs中取得的最新进展也属于这一分类。一般来说，这一分类可以分为两个子类别：基于基础深度神经网络构建的SRSs和结合了一些高级模型的深度神经网络构建的SRSs。

**基础深度神经网络**

最常用于SRSs的深度神经网络是递归神经网络（RNN），由于其在序列建模方面的天然优势，但它也有缺陷。最近，卷积神经网络（CNN）和图神经网络（GNN）也被应用于SRSs中，以弥补RNN的缺陷。接下来，我们分别介绍基于这三种深度神经网络构建的SRSs。

**基于RNN的SRSs**。给定一系列历史用户-项目互动，基于RNN的SRS试图通过模拟给定互动的序列依赖关系来预测下一个可能的互动。除了基本的RNN外，还开发了基于长短期记忆（LSTM）-[Wu et al., 2017]和门控循环单元（GRU）-[Hidasi et al., 2016a]的RNN，以捕捉序列中的长期依赖关系。近年来，基于RNN的SRSs蓬勃发展，它们主导了基于深度学习的SRSs甚至整个SRSs的研究。除了基本的RNN结构外，还提出了一些变体来捕捉序列中更复杂的依赖关系，如分层RNN [Quadrana et al., 2017]。然而，RNN对SRSs来说并非完美无缺，其缺点主要有两方面：（1）由于过强的假设，即序列中任何相邻的互动必须是依赖的，很容易产生虚假依赖，这在现实世界中可能并非如此，因为序列内部通常存在无关或噪声互动；（2）它可能只能捕捉点对点的依赖关系，而忽略了集体依赖关系（例如，几次互动共同影响下一次）。

**基于CNN的SRSs**。与RNN不同，给定一系列用户-项目互动，CNN首先将这些互动的嵌入放入一个矩阵中，然后将这样的矩阵视为时间和潜在空间中的“图像”。最后，CNN使用卷积滤波器学习图像的局部特征作为后续推荐的序列模式。由于CNN对序列中互动的顺序假设不强，并且它们学习的是“图像”中区域之间的模式而非互动之间的模式，因此，基于CNN的SRSs在某种程度上可以弥补基于RNN的SRSs的上述缺点。然而，由于CNN中使用的滤波器大小有限，基于CNN的SRSs无法有效捕捉长期依赖关系，这限制了它们的应用。典型的工作包括[Tang and Wang, 2018; Yuan et al., 2019]。

**基于GNN的SRSs**。

近期，随着GNN的快速发展，基于GNN的SRSs被设计用于利用GNN模拟和捕捉序列中用户-项目互动的复杂转换。通常首先在序列数据上构建一个有向图，将每次互动作为图中的一个节点，同时将每个序列映射为一条路径。然后，在图上学习用户或项目的嵌入，以嵌入整个图上更复杂的关系 [Wu et al., 2019]。这种方法充分利用了GNN捕捉结构化关系数据集中复杂关系的优势。基于GNN的SRSs展现出了通过揭示推荐项目与相应序列上下文之间的复杂关系来提供可解释推荐的巨大潜力。这类SRSs仍处于初期阶段。

## 4.4 高级模型

为了解决基于基础神经网络结构构建的序列推荐系统（SRSs）的局限性，通常将一些高级模型与某种基础深度神经网络（例如RNN，CNN）结合起来，构建更强大的SRSs，以应对特定挑战。接下来，我们介绍三种在SRSs中常用的高级模型。

**注意力模型**。 注意力模型常用于SRSs中，以强调序列中真正相关和重要的互动，同时淡化与下一个互动无关的互动。它们广泛地被整合到浅层网络 [Wang et al., 2018] 和 RNN [Ying et al., 2018] 中，以处理带有噪声的互动序列。

**记忆网络**。 记忆网络被引入到SRSs中，通过结合外部记忆矩阵直接捕捉任何历史用户-项目互动与下一个互动之间的依赖关系。这样的矩阵使得更明确和动态地存储和更新序列中的历史互动成为可能，以提高模型的表达性并减少那些无关互动的干扰 [Chen et al., 2018]。此外，一些工作将键值记忆网络整合进来，存储和更新序列中互动项目的相应知识库信息，以学习属性级偏好，增强推荐 [Huang et al., 2018]。总的来说，记忆网络在SRSs中显示出潜力，但尚未得到充分研究。

**混合模型**。 基于混合模型的SRS结合了不同的模型，这些模型擅长捕捉不同类型的依赖关系，以增强整个模型捕捉各种依赖关系以实现更好推荐的能力。一个典型的例子是 [Tang et al., 2019]，它结合了适合短期和长期依赖的不同类型的编码器，以学习更精确的序列表示，用于后续推荐，并已证明非常有效。然而，这类模型还处于初期阶段。

## 5. open research directions

近年来，特别是过去三年，序列推荐系统的发展迅速，随着深度学习的繁荣，尤其是递归神经网络。在对该领域的研究实践进行分类和总结时，我们确定了以下一些尚未充分探索的开放研究方向：

**情境感知序列推荐系统**。 用户或项目所处的当前环境可能极大地影响用户对项目的选择，这在进行推荐时应考虑。在SRSs中，这一点尤为必要，因为环境可能随时间变化。然而，大多数现有的SRSs忽略了这一重要方面。因此，情境感知SRS将是未来工作的一个重要方向。(good point)(参考NLP)

**社交感知序列推荐系统**。 用户生活在社会中，与线上线下的各种人有联系。他人的行为或意见通常极大地影响用户的选择。因此，需要在SRSs中考虑社交影响，这通常是现有工作中被忽略的。

~~**交互式序列推荐系统**。~~ 现实世界中的购物行为通常是连续的而不是孤立的事件。换句话说，用户与购物平台（例如Amazon）之间实际上存在连续的互动。然而，现有的SRSs经常忽略这种互动，只为单个时间步骤生成推荐。如何结合用户-卖家互动并因此生成多时间步骤的推荐是一个有前景的研究方向。

**跨领域序列推荐系统**。 在现实世界中，用户在一定时间内购买的项目通常来自多个领域而不是单一领域。本质上，不同领域之间的项目存在一些序列依赖关系，例如购买汽车后购买汽车保险。这种跨领域的序列依赖关系在大多数SRSs中被忽略。因此，跨领域SRS是另一个有前景的研究方向，通过利用来自其他领域的信息和来自不同领域的更多样化的推荐来生成更准确的推荐。(以及 现在 热门 的多模态领域 ，也可以进行参考)

## 6. conclusion

Recommender systems (RS) is one of the most direct and practical applications of artificial intelligence in our daily lives. Sequential recommender systems (SRSs) have been at the core of the RS field in the past three to five years as they provide more intelligent and favorable recommendations to satisfy our daily requirements. It is our hope that this summary provides an overview of the challenges and the recent progress as well as some future directions in SRSs to the RS research community.

